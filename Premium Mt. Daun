-- LocalScript / Executor
local player = game.Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()

-- Daftar checkpoint Gunung Daun
local checkpoints = {
    Vector3.new(-7, 13, -10),       -- Basecamp
    Vector3.new(-623, 250, -384),   -- Pos 1
    Vector3.new(-1204, 261, -488),  -- Pos 2
    Vector3.new(-1399, 578, -951),  -- Pos 3
    Vector3.new(-1701, 816, -1400), -- Pos 4
    Vector3.new(-3237, 1710, -2549) -- Puncak
}

-- Variabel kontrol
local autoTeleport = false
local teleportDelay = 1 -- detik jeda antar checkpoint
local currentIndex = 1 -- index checkpoint terakhir yang aktif
local paused = false

-- Fungsi teleport smooth
local function teleportTo(location)
    char = player.Character or player.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")

    local steps = 25
    local startPos = hrp.Position
    local targetPos = location + Vector3.new(0,5,0)

    for i = 1, steps do
        local alpha = i / steps
        hrp.CFrame = CFrame.new(startPos:Lerp(targetPos, alpha))
        task.wait(0.05)
    end
end

-- Auto teleport berurutan dengan pause support
local function startAutoTeleport()
    autoTeleport = true
    while autoTeleport and currentIndex <= #checkpoints do
        if not paused then
            teleportTo(checkpoints[currentIndex])
            currentIndex += 1
        end
        task.wait(teleportDelay)
    end
end

local function stopAutoTeleport()
    autoTeleport = false
end

local function pauseAutoTeleport()
    paused = true
end

local function resumeAutoTeleport()
    paused = false
end

-- Simpan checkpoint terakhir saat teleport manual
local function saveCheckpoint(index)
    currentIndex = index
end

-- GUI
local screenGui = Instance.new("ScreenGui", game:GetService("CoreGui"))
screenGui.Name = "AutoTP_"..math.random(1000,9999)
local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0, 220, 0, 220)
frame.Position = UDim2.new(0,20,0.5,-110)
frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
Instance.new("UICorner", frame).CornerRadius = UDim.new(0,12)

-- Tombol Start
local startBtn = Instance.new("TextButton", frame)
startBtn.Size = UDim2.new(1,-20,0,30)
startBtn.Position = UDim2.new(0,10,0,10)
startBtn.Text = "Start Auto Teleport"
startBtn.TextColor3 = Color3.new(1,1,1)
startBtn.BackgroundColor3 = Color3.fromRGB(40,40,40)
startBtn.Font = Enum.Font.SourceSans
startBtn.TextSize = 16
Instance.new("UICorner", startBtn).CornerRadius = UDim.new(0,8)
startBtn.MouseButton1Click:Connect(startAutoTeleport)

-- Tombol Pause
local pauseBtn = Instance.new("TextButton", frame)
pauseBtn.Size = UDim2.new(1,-20,0,30)
pauseBtn.Position = UDim2.new(0,10,0,50)
pauseBtn.Text = "Pause Auto Teleport"
pauseBtn.TextColor3 = Color3.new(1,1,1)
pauseBtn.BackgroundColor3 = Color3.fromRGB(40,40,40)
pauseBtn.Font = Enum.Font.SourceSans
pauseBtn.TextSize = 16
Instance.new("UICorner", pauseBtn).CornerRadius = UDim.new(0,8)
pauseBtn.MouseButton1Click:Connect(pauseAutoTeleport)

-- Tombol Resume
local resumeBtn = Instance.new("TextButton", frame)
resumeBtn.Size = UDim2.new(1,-20,0,30)
resumeBtn.Position = UDim2.new(0,10,0,90)
resumeBtn.Text = "Resume Auto Teleport"
resumeBtn.TextColor3 = Color3.new(1,1,1)
resumeBtn.BackgroundColor3 = Color3.fromRGB(40,40,40)
resumeBtn.Font = Enum.Font.SourceSans
resumeBtn.TextSize = 16
Instance.new("UICorner", resumeBtn).CornerRadius = UDim.new(0,8)
resumeBtn.MouseButton1Click:Connect(resumeAutoTeleport)

-- Tombol teleport manual per checkpoint
for i, pos in ipairs(checkpoints) do
    local btn = Instance.new("TextButton", frame)
    btn.Size = UDim2.new(1,-20,0,25)
    btn.Position = UDim2.new(0,10,0,130 + (i-1)*30)
    btn.Text = "Teleport to Pos "..i
    btn.TextColor3 = Color3.new(1,1,1)
    btn.BackgroundColor3 = Color3.fromRGB(40,40,40)
    btn.Font = Enum.Font.SourceSans
    btn.TextSize = 14
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,8)

    btn.MouseButton1Click:Connect(function()
        saveCheckpoint(i)
        teleportTo(pos)
    end)
end

-- Auto-respawn ke checkpoint terakhir
player.CharacterAdded:Connect(function(newChar)
    char = newChar
    task.wait(1)
    teleportTo(checkpoints[currentIndex])
end)
